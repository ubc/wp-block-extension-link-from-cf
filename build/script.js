!function(){"use strict";var e=window.wp.element;const{createHigherOrderComponent:t}=wp.compose,{Fragment:n,useEffect:o,useState:l,useRef:a}=wp.element,{InspectorControls:r}=wp.blockEditor,{PanelBody:s,ToggleControl:i,PanelRow:c,TextControl:p,SelectControl:u}=wp.components,{isURL:d}=wp.url;wp.hooks.addFilter("blocks.registerBlockType","ubc/extension/link-from-cf/button/add-attributes",(function(e,t){return"core/button"!==t?e:{...e,attributes:{...e.attributes,linkToPost:{type:"boolean",default:!1},enableCF:{type:"boolean",default:!1},CFKey:{type:"string",default:""}},usesContext:["postId"]}}));const m=t((t=>a=>{const{name:c,attributes:p,setAttributes:d}=a,{enableCF:m,CFKey:b,linkToPost:k}=p,[f,C]=l([]);return"core/button"!==c?(0,e.createElement)(t,{...a}):(o((()=>{(async()=>{const e=new FormData;e.append("action","wp_link_from_cf_get_meta_keys"),e.append("nonce",wp_link_from_cf.nonce);const t=await fetch(ajaxurl,{method:"POST",credentials:"same-origin",body:e}),n=await t.json();n.success&&C(n.data)})()}),[]),(0,e.createElement)(n,null,(0,e.createElement)(t,{...a}),(0,e.createElement)(r,null,(0,e.createElement)(s,{title:"Link Settings",initialOpen:!0},(0,e.createElement)(i,{label:"Enable link to post",checked:k,onChange:()=>{d({linkToPost:!k,enableCF:!!k&&m})}}),(0,e.createElement)(i,{label:"Enable link to custom field",checked:m,onChange:()=>{d({enableCF:!m,linkToPost:!!m&&k})}}),m?(0,e.createElement)(u,{label:"Link to Custom Field",value:b,options:f.map((e=>({label:e,value:e}))),onChange:e=>{d({CFKey:e})},__nextHasNoMarginBottom:!0}):""))))}),"withInspectorControl");wp.hooks.addFilter("editor.BlockEdit","ubc/extension/link-from-cf/button/add-controls",m);const{createHigherOrderComponent:b}=wp.compose,{Fragment:k,useEffect:f,useState:C,useRef:w}=wp.element,{InspectorControls:g}=wp.blockEditor,{PanelBody:E,ToggleControl:F,PanelRow:_,TextControl:y,SelectControl:h}=wp.components,{isURL:T}=wp.url;wp.hooks.addFilter("blocks.registerBlockType","ubc/extension/link-from-cf/post-title/add-attributes",(function(e,t){return"core/post-title"!==t?e:{...e,attributes:{...e.attributes,enableCF:{type:"boolean",default:!1},CFKey:{type:"string",default:""}}}}));const x=b((t=>n=>{const{name:o,attributes:l,setAttributes:a}=n,{enableCF:r,CFKey:s,isLink:i}=l,[c,p]=C([]);return"core/post-title"!==o?(0,e.createElement)(t,{...n}):(f((()=>{(async()=>{const e=new FormData;e.append("action","wp_link_from_cf_get_meta_keys"),e.append("nonce",wp_link_from_cf.nonce);const t=await fetch(ajaxurl,{method:"POST",credentials:"same-origin",body:e}),n=await t.json();n.success&&p(n.data)})()}),[]),(0,e.createElement)(k,null,(0,e.createElement)(t,{...n}),(0,e.createElement)(g,null,i?(0,e.createElement)(E,{title:"Link Settings",initialOpen:!0},(0,e.createElement)(F,{label:"Enable link to custom field",checked:r,onChange:()=>{a({enableCF:!r})}}),r?(0,e.createElement)(h,{label:"Link to Custom Field",value:s,options:c.map((e=>({label:e,value:e}))),onChange:e=>{a({CFKey:e})},__nextHasNoMarginBottom:!0}):""):"")))}),"withInspectorControl");wp.hooks.addFilter("editor.BlockEdit","ubc/extension/link-from-cf/post-title/add-controls",x)}();